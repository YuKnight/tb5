title: $:/core/ui/EditTemplate/tags
tags: $:/tags/EditTemplate

\define lingo-base() $:/language/EditTemplate/

\define addtag()
<div class="tc-edit-add-tag">
<span class="tc-add-tag-name">
<$edit-text tiddler="$(newtag)$" tag="input" default="" placeholder={{$:/language/EditTemplate/Tags/Add/Placeholder}} focusPopup=<<qualify "$:/state/popup/tags-auto-complete">> class="tc-edit-texteditor tc-popup-handle"/>
</span> <$button popup=<<qualify "$:/state/popup/tags-auto-complete">> class="tc-btn-invisible tc-btn-dropdown" tooltip={{$:/language/EditTemplate/Tags/Dropdown/Hint}} aria-label={{$:/language/EditTemplate/Tags/Dropdown/Caption}}>{{$:/core/images/down-arrow}}</$button> <span class="tc-add-tag-button">
<$button message="tm-add-tag" param={{$(newtag)$}} set="$(newtag)$" setTo="" class="">
<<lingo Tags/Add/Button>>
</$button>
</span>
</div>

<div class="tc-block-dropdown-wrapper">
<$reveal state=<<qualify "$:/state/popup/tags-auto-complete">> type="nomatch" text="" default="">
<div class="tc-block-dropdown">
<$linkcatcher set="$(newtag)$" setTo="" message="tm-add-tag">
<$list filter="[tags[]search:title{$(newtag)$}]-[all[current]tags[]]+[sort[]]">
<<tag mode:link>>
</$list>
<hr>
<$list filter="[!is[system]search:title{$(newtag)$}]-[tags[]search:title{$(newtag)$}]-[all[current]tags[]]+[sort[]]">
<<tag mode:link>>
</$list>
</$linkcatcher>
</div>
</$reveal>
</div>
\end

<$set name="newtag" value=<<qualify "$:/temp/newtagName">>>
<div class="tc-edit-tags">
<$fieldmangler>
<$list filter="[all[current]tags[]sort[title]]" storyview="pop">
<<tag mode:"remove">>
</$list>

<<addtag>>
</$fieldmangler>
</div>
</$set>